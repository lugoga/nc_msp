<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Configure Supabase Cloud for collecting workshop registrations">

<title>Admin Setup - Supabase Configuration</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-20cb7ac89268f2f6837cd43da0a0d99f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="description" content="Marine Spatial Planning Initiative for Tanzania - Spatial analysis, coastal management, and ecosystem monitoring in Mkoani and Mkuranga districts">
<meta name="keywords" content="marine spatial planning, coastal management, Tanzania, land cover analysis, ecosystem monitoring, Mkoani, Mkuranga, Pemba, Pwani">
<meta name="author" content="Masumbuko Semba, SOAF-UDSM">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:title" content="Admin Setup - Supabase Configuration">
<meta property="og:description" content="Configure Supabase Cloud for collecting workshop registrations">
<meta property="og:type" content="website">
<meta property="og:url" content="https://lugoga.github.io/nc_msp/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Admin Setup - Supabase Configuration">
<meta name="twitter:description" content="Configure Supabase Cloud for collecting workshop registrations">
<style>
  body {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
  }
  /* Allow selection in code blocks for accessibility */
  pre, code, .sourceCode {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
  }
</style>
<script>
  // Disable right-click context menu
  document.addEventListener('contextmenu', function(event) {
    event.preventDefault();
    return false;
  });
  
  // Disable keyboard shortcuts for copying and screenshots
  document.addEventListener('keydown', function(event) {
    // Block Ctrl+C, Ctrl+X, Ctrl+A
    if (event.ctrlKey || event.metaKey) {
      if (event.key === 'c' || event.key === 'C' || 
          event.key === 'x' || event.key === 'X' || 
          event.key === 'a' || event.key === 'A') {
        event.preventDefault();
        return false;
      }
    }
    
    // Block Print Screen, Fn+F13 (Mac), Win+Shift+S (Snipping Tool)
    if (event.key === 'PrintScreen' || 
        event.key === 'F13' ||
        (event.shiftKey && event.ctrlKey && event.key === 's') ||
        (event.shiftKey && event.metaKey && event.key === '4') ||
        (event.shiftKey && event.metaKey && event.key === '3') ||
        (event.shiftKey && event.metaKey && event.key === '5') ||
        (event.shiftKey && event.key === 'PrintScreen')) {
      event.preventDefault();
      alert('Screenshots and screen capture are not permitted on this website. Content is protected.');
      return false;
    }
  });
  
  // Block Snipping Tool via Win+Shift+S shortcut
  document.addEventListener('keydown', function(event) {
    if (event.key === 's' && event.shiftKey && event.metaKey && !event.ctrlKey) {
      event.preventDefault();
      alert('Snipping Tool is disabled on this website.');
      return false;
    }
  });
  
  // Detect and block clipboard access attempts
  if (navigator.clipboard) {
    navigator.clipboard.addEventListener?.('paste', function(event) {
      event.preventDefault();
    });
  }
  
  // Block drag and drop (prevents saving images)
  document.addEventListener('dragstart', function(event) {
    event.preventDefault();
    return false;
  });
  
  document.addEventListener('drop', function(event) {
    event.preventDefault();
    return false;
  });
  
  // Detect inactive window (user may be using external screenshot tool)
  let isWindowFocused = true;
  window.addEventListener('blur', function() {
    isWindowFocused = false;
    console.warn('Window lost focus - screenshot may be attempted');
  });
  
  window.addEventListener('focus', function() {
    isWindowFocused = true;
  });
  
  // Monitor for visibility changes (screenshot app may hide window)
  document.addEventListener('visibilitychange', function() {
    if (document.hidden) {
      console.warn('Page hidden - possible screenshot in progress');
    }
  });
  
  // Smooth scrolling for all internal links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });
  
</script>
<script>
  // Initialize scroll to top button after page loads
  document.addEventListener('DOMContentLoaded', function() {
    const scrollToTopBtn = document.getElementById('scrollToTopBtn');
    if (!scrollToTopBtn) {
      // Create scroll to top button if it doesn't exist
      const btn = document.createElement('button');
      btn.id = 'scrollToTopBtn';
      btn.innerHTML = '‚Üë';
      btn.style.cssText = `
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 1000;
        background-color: #3498db;
        color: white;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        font-size: 24px;
        cursor: pointer;
        display: none;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        transition: all 0.3s ease;
        font-weight: bold;
      `;
      document.body.appendChild(btn);
      
      // Show/hide button based on scroll position
      window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
          btn.style.display = 'block';
        } else {
          btn.style.display = 'none';
        }
      });
      
      // Scroll to top when button clicked
      btn.addEventListener('click', function() {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
      
      // Hover effects
      btn.addEventListener('mouseenter', function() {
        this.style.backgroundColor = '#2980b9';
        this.style.transform = 'scale(1.1)';
      });
      
      btn.addEventListener('mouseleave', function() {
        this.style.backgroundColor = '#3498db';
        this.style.transform = 'scale(1)';
      });
    }
  });
</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/msp_logo.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./about.html" aria-current="page"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schedule.html"> 
<span class="menu-text">Scope</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./blog.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./events.html"> 
<span class="menu-text">Events</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reports" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Reports</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-reports">    
        <li>
    <a class="dropdown-item" href="./reports/UN_Inception report_14092025_SM.pdf" target="_blank">
 <span class="dropdown-text">Deliverable One: Inception Report</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-resources" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Resources</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-resources">    
        <li>
    <a class="dropdown-item" href="./TOR_259658.pdf" target="_blank">
 <span class="dropdown-text">Resources1: TOR</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <span class="nav-link">
<span class="menu-text">WebApp</span>
    </span>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./team.html"> 
<span class="menu-text">Team</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./gallery.html"> 
<span class="menu-text">Gallery</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-admin" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Admin</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-admin">    
        <li>
    <a class="dropdown-item" href="./admin-setup.html">
 <span class="dropdown-text">Setup Registration Sync</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./admin-registrations.html">
 <span class="dropdown-text">View Registrations</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lugoga/nc_msp/" target="_blank"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/masumbuko-semba-20936a4b/" target="_blank"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/channel/UC9uZ1KPyo7zIzI4BnUtHPfA" target="_blank"> <i class="bi bi-youtube" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://semba.shinyapps.io/besa/" target="_blank"> <i class="bi bi-eye" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://semba.shinyapps.io/vizingaApp/" target="_blank"> <i class="bi bi-binoculars" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://semba.shinyapps.io/digital/" target="_blank"> <i class="bi bi-sun" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:lugosemba@gmail.com" target="_blank"> <i class="bi bi-email" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Admin Setup - Supabase Configuration</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Project Info</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Marine Spatial Planning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./team.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Meet Our Team</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./news.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">News &amp; Updates</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Weather Updates</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./weather.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Live Weather</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./news.html#current-conditions--field-operations" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Seasonal Calendar</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://www.ncei.noaa.gov/products/ocean-weather-forecast" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">NOAA Marine Forecast</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://www.nhc.noaa.gov/" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Tropical Storm Tracking</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
<div class="quarto-sidebar-footer"><div class="sidebar-footer-item">
<div style="text-align: center; margin: 20px 0;">
<p><img src="images/coat_OG_web.png" class="img-fluid" style="margin: 10px 5px;" width="100"> <br> <img src="images/nc.png" class="img-fluid" style="margin: 10px 5px;" width="50"> <img src="images/msp_logo.svg" class="img-fluid" style="margin: 10px 5px;" width="50"> <img src="images/udsm.png" class="img-fluid" style="margin: 10px 5px;" width="50"> <img src="images/tnc.svg" class="img-fluid" style="margin: 10px 5px;" width="150"> <img src="images/wcs.png" class="img-fluid" style="margin: 10px 5px;" width="50"> <img src="images/wwf.png" class="img-fluid" style="margin: 10px 5px;" width="40"> <img src="images/wiomsa.png" class="img-fluid" style="margin: 10px 5px;" width="100"> <img src="images/Tafiri.png" class="img-fluid" style="margin: 10px 5px;" width="50"> <img src="images/zafiri.png" class="img-fluid" style="margin: 10px 5px;" width="50"> <img src="images/nmaist.jpg" class="img-fluid" style="margin: 10px 5px;" width="50"> <img src="images/dsfa_screenshot.png" class="img-fluid" style="margin: 10px 5px;" width="50"> <img src="images/IUCN_logo.svg" class="img-fluid" style="margin: 10px 5px;" width="50"></p>
</div>
</div></div></nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Admin Setup - Supabase Configuration</h1>
</div>

<div>
  <div class="description">
    Configure Supabase Cloud for collecting workshop registrations
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div style="background-color: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #ff9800;">
<p>‚öôÔ∏è <strong>Admin Configuration Page</strong> - Set up Supabase to collect all workshop registrations</p>
</div>
<div style="max-width: 900px; margin: 20px auto;">

<div id="setupDiv">
  <h2 class="anchored">Enable Supabase Registration Collection</h2>
  
  <p>Supabase is a free, serverless PostgreSQL database in the cloud. All workshop registrations will be automatically collected in your Supabase project.</p>

  <div style="background-color: #e8f4f8; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #3498db;">
    <strong>Benefits:</strong>
    <ul>
      <li>‚úì Real-time database (see registrations instantly)</li>
      <li>‚úì Free tier (up to 500 MB storage)</li>
      <li>‚úì Built-in authentication &amp; security</li>
      <li>‚úì Access from anywhere</li>
      <li>‚úì Easy data export &amp; reporting</li>
    </ul>
  </div>

  <h3 class="anchored">Step 1: Create Supabase Project</h3>
  <ol>
    <li>Go to <a href="https://supabase.com" target="_blank">supabase.com</a> and sign up (free)</li>
    <li>Create a new project (choose a region closest to you)</li>
    <li>Wait for project to be ready (takes ~1 minute)</li>
  </ol>

  <h3 class="anchored">Step 2: Create Table for Registrations</h3>
  <ol>
    <li>Go to your Supabase project dashboard</li>
    <li>Click "SQL Editor" in the left menu</li>
    <li>Copy and paste this SQL command to create the table:</li>
  </ol>

  <textarea readonly="" style="width: 100%; padding: 10px; background-color: #f5f5f5; border: 1px solid #ccc; border-radius: 4px; margin: 10px 0; font-family: monospace; height: 250px; color: #333;">CREATE TABLE msp_registrations (
  id BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  name TEXT NOT NULL,
  email TEXT NOT NULL,
  phone TEXT,
  organization TEXT NOT NULL,
  role TEXT NOT NULL,
  gender TEXT NOT NULL,
  origin TEXT NOT NULL,
  experience TEXT NOT NULL,
  interests TEXT NOT NULL,
  timestamp TEXT NOT NULL,
  synced_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(email, timestamp)
);

-- Enable RLS (Row Level Security)
ALTER TABLE msp_registrations ENABLE ROW LEVEL SECURITY;

-- Allow public insert (for visitors to submit)
CREATE POLICY "Allow public insert" ON msp_registrations
  FOR INSERT
  WITH CHECK (TRUE);

-- Allow authenticated users to read
CREATE POLICY "Allow authenticated read" ON msp_registrations
  FOR SELECT
  USING (auth.role() = 'authenticated');</textarea>

  <button id="copySqlBtn" style="background-color: #3498db; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px;">
    üìã Copy SQL to Clipboard
  </button>

  <h3 style="margin-top: 20px;" class="anchored">Step 3: Get Your Credentials</h3>
  <ol>
    <li>In your Supabase project, click "Settings" ‚Üí "API"</li>
    <li>Copy your <strong>Project URL</strong> and <strong>anon public key</strong></li>
    <li>Paste them below</li>
  </ol>

  <div style="margin-bottom: 15px;">
    <label for="supabaseUrl" style="display: block; margin-bottom: 5px; font-weight: bold;">Supabase Project URL:</label>
    <input type="url" id="supabaseUrl" placeholder="https://your-project.supabase.co" style="width: 100%; padding: 10px; border: 1px solid #bbb; border-radius: 4px; box-sizing: border-box; font-family: monospace;">
  </div>

  <div style="margin-bottom: 20px;">
    <label for="supabaseKey" style="display: block; margin-bottom: 5px; font-weight: bold;">Supabase Anon Public Key:</label>
    <textarea id="supabaseKey" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." style="width: 100%; padding: 10px; border: 1px solid #bbb; border-radius: 4px; box-sizing: border-box; font-family: monospace; height: 80px;"></textarea>
  </div>

  <button id="saveConfigBtn" style="background-color: #27ae60; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: bold; margin-right: 10px;">
    ‚úì Save Configuration
  </button>
  
  <button id="testConfigBtn" style="background-color: #3498db; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: bold;">
    üß™ Test Connection
  </button>

  <div id="statusMessage" style="margin-top: 20px; padding: 15px; border-radius: 4px; display: none;"></div>
</div>

<div id="statusDiv" style="margin-top: 30px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background-color: #f0f8ff; display: none;">
  <h3 class="anchored">‚úì Supabase Connected!</h3>
  <p style="color: #666; font-size: 14px;">
    Your Supabase project is now connected and collecting registrations.
  </p>
  
  <div style="margin: 15px 0; padding: 15px; background-color: white; border: 1px solid #ddd; border-radius: 4px;">
    <p style="margin: 0;"><strong>View Registrations:</strong></p>
    <ul style="margin: 10px 0; padding-left: 20px;">
      <li><a href="#" id="supabaseLink" target="_blank" style="color: #3498db; text-decoration: none;">Open Supabase Dashboard ‚Üí</a></li>
      <li>Go to "Table Editor" ‚Üí "msp_registrations"</li>
      <li>See all registrations in real-time</li>
    </ul>
  </div>

  <button id="resetConfigBtn" style="background-color: #e74c3c; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px;">
    üóëÔ∏è Reset Configuration
  </button>
</div>

</div>

<script src="supabase-config.js"></script>
<script>
// Load saved config from localStorage
function loadConfig() {
  const url = localStorage.getItem('supabase_url');
  const key = localStorage.getItem('supabase_key');
  
  if (url && key) {
    document.getElementById('supabaseUrl').value = url;
    document.getElementById('supabaseKey').value = key;
    showStatus(url);
  }
}

// Save configuration
document.getElementById('saveConfigBtn').addEventListener('click', function() {
  const url = document.getElementById('supabaseUrl').value.trim();
  const key = document.getElementById('supabaseKey').value.trim();
  
  if (!url || !key) {
    showMessage('Please enter both URL and key', 'error');
    return;
  }
  
  if (!url.includes('supabase.co')) {
    showMessage('Invalid Supabase URL. Should include "supabase.co"', 'error');
    return;
  }
  
  // Save to localStorage
  localStorage.setItem('supabase_url', url);
  localStorage.setItem('supabase_key', key);
  
  // Update SUPABASE_CONFIG
  SUPABASE_CONFIG.SUPABASE_URL = url;
  SUPABASE_CONFIG.SUPABASE_ANON_KEY = key;
  
  showMessage('‚úì Configuration saved! Testing connection...', 'success');
  
  // Test connection
  setTimeout(() => testConnection(url, key), 1000);
});

// Test connection
async function testConnection(url, key) {
  try {
    const response = await fetch(`${url}/rest/v1/msp_registrations?limit=1`, {
      headers: {
        'apikey': key,
        'Authorization': `Bearer ${key}`
      }
    });
    
    if (response.ok) {
      showMessage('‚úì Successfully connected to Supabase!', 'success');
      setTimeout(() => showStatus(url), 1500);
    } else if (response.status === 401) {
      showMessage('‚úó Invalid API key. Check your credentials.', 'error');
    } else if (response.status === 404) {
      showMessage('‚úó Table not found. Did you create the table with SQL?', 'error');
    } else {
      showMessage(`‚úó Connection failed: ${response.statusText}`, 'error');
    }
  } catch (error) {
    showMessage(`‚úó Error: ${error.message}`, 'error');
  }
}

// Test button
document.getElementById('testConfigBtn').addEventListener('click', function() {
  const url = document.getElementById('supabaseUrl').value.trim();
  const key = document.getElementById('supabaseKey').value.trim();
  
  if (!url || !key) {
    showMessage('Please enter URL and key first', 'error');
    return;
  }
  
  showMessage('üß™ Testing connection...', 'info');
  testConnection(url, key);
});

// Reset configuration
document.getElementById('resetConfigBtn')?.addEventListener('click', function() {
  if (confirm('Remove Supabase configuration? Registrations will only save locally.')) {
    localStorage.removeItem('supabase_url');
    localStorage.removeItem('supabase_key');
    document.getElementById('supabaseUrl').value = '';
    document.getElementById('supabaseKey').value = '';
    SUPABASE_CONFIG.SUPABASE_URL = '';
    SUPABASE_CONFIG.SUPABASE_ANON_KEY = '';
    showMessage('‚úì Configuration reset.', 'success');
    document.getElementById('statusDiv').style.display = 'none';
  }
});

// Show message
function showMessage(text, type) {
  const msgDiv = document.getElementById('statusMessage');
  msgDiv.textContent = text;
  
  if (type === 'success') {
    msgDiv.style.backgroundColor = '#d4edda';
    msgDiv.style.color = '#155724';
    msgDiv.style.borderLeft = '4px solid #28a745';
  } else if (type === 'error') {
    msgDiv.style.backgroundColor = '#f8d7da';
    msgDiv.style.color = '#721c24';
    msgDiv.style.borderLeft = '4px solid #dc3545';
  } else {
    msgDiv.style.backgroundColor = '#d1ecf1';
    msgDiv.style.color = '#0c5460';
    msgDiv.style.borderLeft = '4px solid #17a2b8';
  }
  
  msgDiv.style.display = 'block';
}

// Show status when configured
function showStatus(url) {
  document.getElementById('setupDiv').style.display = 'none';
  document.getElementById('statusDiv').style.display = 'block';
  
  // Update link
  const projectName = url.split('.')[0].replace('https://', '');
  document.getElementById('supabaseLink').href = `https://supabase.com/dashboard/project/${projectName}`;
}

// Copy SQL to clipboard
document.getElementById('copySqlBtn').addEventListener('click', function() {
  const sql = document.querySelector('textarea[readonly]').value;
  navigator.clipboard.writeText(sql).then(() => {
    this.textContent = '‚úì Copied!';
    setTimeout(() => {
      this.textContent = 'üìã Copy SQL to Clipboard';
    }, 2000);
  });
});

// Load on page load
window.addEventListener('load', loadConfig);
</script>
<hr>
<section id="features" class="level2">
<h2 class="anchored" data-anchor-id="features">Features</h2>
<ul>
<li><strong>Real-time Updates:</strong> See registrations appear instantly</li>
<li><strong>Automatic Backup:</strong> All data backed up in Supabase cloud</li>
<li><strong>Free Tier:</strong> 500 MB storage, plenty for thousands of registrations</li>
<li><strong>Secure:</strong> Only accepts registrations through proper API</li>
<li><strong>Accessible:</strong> Log in from anywhere to view data</li>
<li><strong>Easy Export:</strong> Download data as CSV from Supabase dashboard</li>
</ul>
<hr>
</section>
<section id="next-steps" class="level2">
<h2 class="anchored" data-anchor-id="next-steps">Next Steps</h2>
<ol type="1">
<li>Complete setup above</li>
<li>Visit <code>/events</code> and test registration</li>
<li>Check your Supabase dashboard to see the data</li>
<li>Share <code>/events</code> link with participants</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>¬© 2025 Semba | Marine Spatial Planning | Led by <a href="https://www.udsm.ac.tz">SOAF-UDSM</a> | <a href="mailto:msp.coastal.tz@udsm.ac.tz">Contact Us</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>